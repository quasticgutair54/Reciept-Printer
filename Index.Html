<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>The Infinite Receipt</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #111;
      color: #0f0;
      font-family: monospace;
      overflow: hidden;
    }
    .screen {
      display: none;
      width: 100%;
      height: 100vh;
      text-align: center;
      padding: 20px;
      overflow-y: auto;
    }
    .active { display: block; }
    .receipt {
      background: #fff;
      color: #000;
      display: inline-block;
      padding: 20px;
      text-align: left;
      font-size: 14px;
      width: 300px;
      border: 2px dashed #000;
    }
    .item { cursor: pointer; }
    .crossed { text-decoration: line-through; color: red; }
    .glitch {
      font-size: 20px;
      color: #f0f;
      animation: flicker 0.2s infinite;
    }
    @keyframes flicker {
      0% { opacity: 1; }
      50% { opacity: 0.4; }
      100% { opacity: 1; }
    }
    #scrolling {
      color: #0f0;
      font-size: 16px;
      white-space: pre-line;
      animation: scroll 60s linear infinite;
    }
    @keyframes scroll {
      0% { transform: translateY(100%); }
      100% { transform: translateY(-500%); }
    }
    #gameCanvas {
      background: #222;
      display: block;
      margin: 20px auto;
      border: 2px solid #0f0;
    }
  </style>
</head>
<body>

<!-- Phase 1: Receipt -->
<div id="phase1" class="screen active">
  <h2>ðŸ§¾ Your Receipt</h2>
  <div class="receipt" id="receiptList"></div>
  <p>Click the items that donâ€™t belongâ€¦</p>
</div>

<!-- Phase 2: Glitch -->
<div id="phase2" class="screen">
  <h2 class="glitch">âš¡ RECEIPT GLITCH âš¡</h2>
  <p>System Overload! Please continueâ€¦</p>
  <button onclick="startScroll()">Fix Glitch</button>
</div>

<!-- Phase 3: Scrolling Receipt -->
<div id="phase3" class="screen">
  <h2>ðŸ“œ Infinite Receipt Printingâ€¦</h2>
  <div id="scrolling"></div>
</div>

<!-- Phase 4: Game -->
<div id="phase4" class="screen">
  <h2>ðŸŽ® Catch the Falling Items</h2>
  <canvas id="gameCanvas" width="400" height="400"></canvas>
  <p id="scoreText">Score: 0 / 10</p>
</div>

<!-- Phase 5: Redirect -->
<div id="phase5" class="screen">
  <h2>âœ… Transaction Complete</h2>
  <p>Total Due: 0. Your curiosity.</p>
  <p>Redirecting to brandâ€¦</p>
</div>

<script>
  // ------------------ WITTY MESSAGE BANK ------------------
  const receiptMessages = [
    "You received: 2kg of nostalgia.",
    "Discount applied: Eternal confusion (-â‚¹99).",
    "Item unavailable: Love. Please restock later.",
    "Added: 1 spoon of chaos.",
    "Warranty void: Common sense.",
    "You unlocked: Grandmaâ€™s secret approval coupon.",
    "Promo code: CRYMORE2025 applied.",
    "You purchased: A slightly used dream.",
    "Tax: +18% stress.",
    "Error: Out of patience.",
    "Bundle pack: 3 regrets + 1 free disappointment.",
    "Subscription renewed: Anxiety Prime.",
    "Free trial ended: Happiness (expired).",
    "Cashback: 0 rupees.",
    "Special offer: Free awkward silence.",
    "Returned item: Confidence (damaged).",
    "Exclusive: Rare air particle.",
    "Congratulations! You bought nothing.",
    "Oops. You ordered pineapple on pizza again.",
    "Discount coupon: Half-off optimism.",
    "Free add-on: Existential dread.",
    "Limited stock: Hope (sold out).",
    "Error code: EGO_TOO_HIGH.",
    "Random reward: 1 mosquito bite.",
    "Exclusive bonus: 5 minutes of procrastination.",
    "Processing fee: Your last nerve.",
    "Restocking: Socks that vanish in dryer.",
    "Surprise charge: Electricity bill flashback.",
    "You received: Long queue experience.",
    "Membership unlocked: Midnight overthinkers club.",
    "VAT applied: Value-Added Tears.",
    "Inventory low: Chill.",
    "Receipt update: Confidence missing.",
    "Hidden cost: 2 years of overthinking.",
    "Unlocked: Fake enthusiasm pack.",
    "Service fee: Social awkwardness.",
    "Bundle deal: 2 lies + 1 half-truth.",
    "Order delivered: Wrong address.",
    "Unboxed: Eternal WiFi buffering.",
    "Price adjusted: Sanity = priceless.",
    "You claimed: Lifetime sarcasm license.",
    "Late fee: Apologies not accepted.",
    "Reward unlocked: Half-eaten samosa.",
    "Invoice line: Patience overcharged.",
    "Cart suggestion: Sleep. Not added.",
    "Backordered: Motivation.",
    "Bonus item: Fake confidence.",
    "You found: Unread notification.",
    "Rebate: -â‚¹1 (terms apply).",
    "Service upgrade: Silent judgment.",
    "Hidden fee: Mood swings.",
    "Order shipped: Broken expectations.",
    "Custom charge: Your last braincell.",
    "Caution: Handle with existential crisis.",
    "Scan applied: Spicy regret.",
    "Bill add-on: Complicated feelings.",
    "Special edition: Dust collector deluxe.",
    "Extra charge: One sided love.",
    "Applied coupon: DEALWITHIT.",
    "Fine: Overthinking late night fee.",
    "Back in stock: Cringe memories.",
    "Congratulations! You unlocked disappointment DLC.",
    "Overcharged: Free water bottle.",
    "Caution: Emotional baggage detected.",
    "Flash sale: Buy 1 problem, get 2 free.",
    "Premium add-on: Background stress music.",
    "You earned: Accidental embarrassment points.",
    "Bill note: Please cry responsibly.",
    "Restocking soon: Self-control.",
    "Surcharge: Invisible pressure.",
    "Invoice closed: Trust issues.",
    "Delivery delayed: Inner peace.",
    "Unlocked reward: Reused excuses.",
    "Random gift: Unwanted advice.",
    "Extended warranty: Lifetime cringe.",
    "Cart update: Missing socks located.",
    "Fee added: Emotional damage.",
    "Reward: Half a compliment.",
    "You found: 1 random useless cable.",
    "Cart auto-filled: Dreams you gave up.",
    "Surprise gift: Expired coupon.",
    "Congratulations! You leveled up: Confused adult.",
    "Receipt add-on: Overdue karma."
  ];

  // ------------------ PHASE 1 ------------------
  const receiptList = document.getElementById("receiptList");
  let clicked = 0;

  function generateReceipt() {
    for (let i=0; i<10; i++) {
      let div = document.createElement("div");
      div.className = "item";
      div.innerText = "Item " + (i+1);
      div.onclick = () => crossItem(div);
      receiptList.appendChild(div);
    }
  }

  function crossItem(el) {
    if (!el.classList.contains("crossed")) {
      el.classList.add("crossed");
      let msg = receiptMessages[Math.floor(Math.random() * receiptMessages.length)];
      el.innerText = el.innerText + " â†’ " + msg;
      clicked++;
      if (clicked >= 5) {
        document.getElementById("phase1").classList.remove("active");
        document.getElementById("phase2").classList.add("active");
      }
    }
  }

  // ------------------ PHASE 2 ------------------
  function startScroll() {
    document.getElementById("phase2").classList.remove("active");
    document.getElementById("phase3").classList.add("active");
    let scrollDiv = document.getElementById("scrolling");
    let content = "";
    for (let i=0; i<200; i++) {
      let msg = receiptMessages[Math.floor(Math.random() * receiptMessages.length)];
      content += msg + "\n";
    }
    scrollDiv.innerText = content;
    setTimeout(startGame, 15000); // scroll 15s then game
  }

  // ------------------ PHASE 4: GAME ------------------
  let score = 0;
  const canvas = document.getElementById("gameCanvas");
  const ctx = canvas.getContext("2d");
  let player = {x:180,y:370,w:40,h:20};
  let items = [];

  function startGame() {
    document.getElementById("phase3").classList.remove("active");
    document.getElementById("phase4").classList.add("active");
    document.addEventListener("keydown", movePlayer);
    setInterval(spawnItem, 1000);
    requestAnimationFrame(updateGame);
  }

  function movePlayer(e) {
    if (e.key==="ArrowLeft") player.x -= 20;
    if (e.key==="ArrowRight") player.x += 20;
  }

  function spawnItem() {
    items.push({x:Math.random()*380, y:0, text: receiptMessages[Math.floor(Math.random()*receiptMessages.length)]});
  }

  function updateGame() {
    ctx.clearRect(0,0,400,400);
    ctx.fillStyle="#0f0";
    ctx.fillRect(player.x,player.y,player.w,player.h);

    for (let i=0;i<items.length;i++) {
      let it=items[i];
      ctx.fillStyle="#fff";
      ctx.fillText("â¬‡", it.x, it.y);
      it.y+=2;
      if (it.y>370 && it.x>player.x && it.x<player.x+player.w) {
        score++;
        items.splice(i,1);
        document.getElementById("scoreText").innerText="Score: "+score+" / 10";
        if (score>=10) {
          endGame();
          return;
        }
      }
    }
    requestAnimationFrame(updateGame);
  }

  function endGame() {
    document.getElementById("phase4").classList.remove("active");
    document.getElementById("phase5").classList.add("active");
    setTimeout(()=>{ window.location.href="https://yourbrandsite.com"; },4000);
  }

  // ------------------ START ------------------
  generateReceipt();
</script>
</body>
</html>
